{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>SVU Health Centre</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css">
  <!-- Bootstrap core CSS -->
  <link href="{%  static 'css/bootstrap.min.css' %}" rel="stylesheet" type="text/css">
  <!-- Material Design Bootstrap -->
  <link href="{%  static 'css/mdb.min.css' %}" rel="stylesheet" type="text/css">
  <!-- Your custom styles (optional) -->
  <link href="{%  static 'css/style.css' %}" rel="stylesheet" type="text/css">
  <style>
  .modal-content{
  width: 600px;
  margin:auto;
}
</style>
  
</head>



  <!-- Start your project here-->
  <body >

<!--Navbar -->
<!--Navbar-->
<nav class="navbar navbar-expand-lg  navbar-dark cyan">

  <!-- Navbar brand -->
  

<a class="navbar-brand" href="#">
    <img src="{%  static 'img/Sv-University-logo2.png' %}" height="80" width="100" alt="svu logo">SVU Health Centre
  </a>


  <!-- Collapse button -->
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#basicExampleNav"
    aria-controls="basicExampleNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <!-- Collapsible content -->
  <div class="collapse navbar-collapse" id="basicExampleNav">

    <!-- Links -->
    <ul class="navbar-nav ml-auto ">
      <li class="nav-item active">
        <a class="nav-link" href="#">Home
          <span class="sr-only">(current)</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Store</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Medicine Shortage</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="./LogOut/">LogOut</a>
      </li>

      <!-- Dropdown -->
      

    </ul>
    <!-- Links -->

   
  </div>
  <!-- Collapsible content -->

</nav>
<!--/.Navbar--> 
<div class="container-fluid border border-primary">

<div class="row no-gutters">

  <div class="col-md-9">
<ul class="nav nav-tabs blue lighten-4" id="myTab" role="tablist">
  <li class="nav-item">
    <a class="nav-link active text-secondary" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home"
      aria-selected="true"><h5><b>Student</b></h5></a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile"
      aria-selected="false"><h5><b>Faculty</b></h5></a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact"
      aria-selected="false"><h5><b>Staff</b></h5></a>
  </li>
</ul>
<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
 <div class="container p-5">
     <div id="results"></div>
<div class="card text-white  cyan lighten-3 mb-3 offset-md-3 offset-sm-0" style="max-width: 30rem;">
  <div class="card-header">Student Details</div>
  <div class="card-body">
    <form method="POST" action="./GetStudent/" id="post-form">
     {% csrf_token %}
 <div class="form-group" >
    <div class="row">
    <div class="col-md-3">
    <label for="exampleInputEmail1">Student Id</label>
    </div>
    <div class="col-md-6">
    <input type="text" class="form-control" name="Admission_number" placeholder="Enter Student Id" id="Admission_number">
  </div>
  </div>
  <center><button type="submit" class="btn btn-indigo" data-toggle="collapse" data-target="#StudentDetails"
          aria-expanded="true" aria-controls="StudentDetails">Submit</button></center>
  </div>
</form>
  </div>
</div>

<div class="table-responsive">
            <table class="table table-striped" id="StudentDetails">
              <thead>
                <tr>
                  <th>Admision Number</th>
                  <th>Student Name</th>
                  <th>Gender</th>
                  <th>Age</th>
                  <th>Contact Number</th>
                  </tr>
              </thead>
              <tbody>


                            <tr>

                            
                            </tr>


              </tbody>
            </table>
          </div>
<center><a class="btn btn-indigo" href="#" data-toggle="modal" data-target="#OPForm">Generate OP</a>
  </center>


<div class="modal fade" id="OPForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
   
    <div class="modal-content">
       <div id="printarea">
      <div class="modal-header text-center light-blue darken-3 white-text ">
        <h4 class="modal-title w-100 font-weight-bold"><i class="fas fa-notes-medical"></i> SVU HEALTH CENTRE</h4>

        
        <button type="button" class="btn-primary p-2 btn-rounded close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        
      </div>
      <div class="modal-body mx-3">

        <center><h5> OP Form</h5></center>
        <div class="row">
         <div class="col-md-6">
           <div class="md-form mb-5">
             <i class="fab fa-invision prefix grey-text"></i>
             <input type="text" id="sid" class="form-control" name="invoice_number">
             <label >Admission Number:</label>
           </div>
         </div>

        <div class="col-md-6">
          <div class="md-form mb-5">
            <i class="fas fa-calendar-day prefix grey-text"></i>
            <input type="text" id="sname" class="form-control" >
            <label >OP Number:</label>
          </div>
        </div>
       </div>

       <div class="row">
         <div class="col-md-4">
           <div class="md-form mb-5">
             <i class="fas fa-tablets prefix grey-text"></i>
             <input type="text" id="sid" class="form-control"  value="{{ recs.Student_name }}">
             <label >Student Name:</label>
           </div>
         </div>

        <div class="col-md-4">
          <div class="md-form mb-5">
            <i class="fas fa-clipboard-list prefix grey-text"></i>
            <input type="text" id="sname" class="form-control" value="{{ recs.Age }}">
            <label >Age:</label>
          </div>
        </div>
       
         <div class="col-md-4">
           <div class="md-form mb-5">
             <i class="fas fa-hand-holding-usd prefix grey-text"></i>
             <input type="text" id="sid" class="form-control" name="rate/unit">
             <label >Date:</label>
           </div>
         </div>
       </div>
      </div>
      </div>
      <div class="modal-footer d-flex justify-content-center">
        <a class="btn btn-indigo" onclick="printContent('printarea')">Generate OP</a>
      </div>
  
    </div>
  </div>
</div>
<!--ending Add Stock Popover-->

  </div>
  </div>
  <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
    
  <div class="container p-5">

<div class="card text-white  cyan lighten-3 mb-3 offset-md-3 offset-sm-0" style="max-width: 30rem;">
  <div class="card-header">Faculty Details</div>
  <div class="card-body">
    <form>
 
 <div class="form-group">
    <div class="row">
    <div class="col-md-3">
    <label for="exampleInputEmail1">Faculty Id</label>
    </div>
    <div class="col-md-6">
    <input type="text" class="form-control"  placeholder="Enter Faculty Id">
  </div>
  </div>
  <center><button type="submit" class="btn btn-indigo">Submit</button></center>
  </div>
</form>
  </div>


</div>

  </div>


  </div>
  <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
    
  <div class="container p-5">

<div class="card text-white blue lighten-2 mb-3 offset-md-3 offset-sm-0" style="max-width: 30rem;">
  <div class="card-header">Staff Details</div>
  <div class="card-body">
    <form>
 
 <div class="form-group">
    <div class="row">
    <div class="col-md-3">
    <label for="exampleInputEmail1">Staff Id</label>
    </div>
    <div class="col-md-6">
    <input type="text" class="form-control"  placeholder="Enter Staff Id">
  </div>
  </div>
  <center><button type="submit" class="btn btn-indigo">Submit</button></center>
  </div>
</form>
  </div>


</div>

  </div>

  </div>

</div>

</div>
<div class="col-md-3">


<div class="accordion" id="accordionExample275">
  <div class="card z-depth-0 bordered purple lighten-5">
    <div class="card-header" id="headingOne2">
      <h5 class="mb-0">
        <button class="btn btn aqua-gradient btn-lg" type="button" data-toggle="collapse" data-target="#collapseOne2"
          aria-expanded="true" aria-controls="collapseOne2">
          Student Entry
        </button>
      </h5>
    </div>
    <div id="collapseOne2" class="collapse" aria-labelledby="headingOne2" data-parent="#accordionExample275">
      <div class="card-body">
           <a class="btn btn blue-gradient btn-sm" type="button" href="./StudentMedicineIssue/">Click Here to Issue Medicines to Students</a>

      </div>
    </div>
  </div>
  <div class="card z-depth-0 bordered purple lighten-4">
    <div class="card-header" id="headingTwo2">
      <h5 class="mb-0">
        <button class="btn btn aqua-gradient btn-lg" type="button" data-toggle="collapse" data-target="#collapseTwo2"
          aria-expanded="false" aria-controls="collapseTwo2">
          Faculty Entry
        </button>
      </h5>
    </div>
    <div id="collapseTwo2" class="collapse" aria-labelledby="headingTwo2" data-parent="#accordionExample275">
      <div class="card-body">
       <p>Click Here to Issue Medicines to Faculty</p>
      </div>
    </div>
  </div>
  <div class="card z-depth-0 bordered purple lighten-3">
    <div class="card-header" id="headingThree2">
      <h5 class="mb-0">
        <button class="btn btn aqua-gradient btn-lg" type="button" data-toggle="collapse" data-target="#collapseThree2"
          aria-expanded="false" aria-controls="collapseThree2">
          Staff Entry &nbsp;&nbsp;&nbsp;&nbsp;
        </button>
      </h5>
    </div>
    <div id="collapseThree2" class="collapse" aria-labelledby="headingThree2" data-parent="#accordionExample275">
      <div class="card-body">
        <p>Click Here to Issue Medicines to Staff</p>
      </div>
    </div>
  </div>
</div>




</div>
</div>










</div>

  <!-- SCRIPTS -->
  <!-- JQuery -->

  <script type="text/javascript" src="{%  static 'js/jquery-3.3.1.min.js' %}"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="{%  static 'js/popper.min.js' %}"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="{%  static 'js/bootstrap.min.js' %}"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="{%  static 'js/mdb.js' %}"></script>

  <script >
 function printContent(el){
   var restorepage = document.body.innerHTML;
   var printcontent= document.getElementById(el).innerHTML;
   document.body.innerHTML=printcontent;
   window.print();
   document.body.innerHTML=restorepage;
 }
 </script>

  <script>
      $('#post-form').on('submit', function(event){
    event.preventDefault();
    console.log("form submitted!")  // sanity check
    create_post();
});
  </script>
  <script>
      function create_post() {
    console.log("create post is working!") // sanity check
    $.ajax({
        url : "GetStudent/", // the endpoint
        type : "POST", // http method
        data : { the_post : $('#Admission_number').val() }, // data sent with the post request



        // handle a successful response
        success : function(json) {
            $('#Admission_number').val(''); // remove the value from the input
            $('#results').html("<div></div>");
            console.log(json); // log the returned json to the console
            $("#StudentDetails").prepend("<td>"+json.Admission_number+"</td>",
                                         "<td>"+json.Student_name+"</td>",
                                         "<td>"+json.gender+"</td>",
                                         "<td>"+json.Age+"</td>",
                                         "<td>"+json.Contact_no+"</td>");
            console.log("success"); // another sanity check
        },

        // handle a non-successful response
        error : function(xhr,errmsg,err) {
            $('#results').html("<div class='alert-box alert radius' data-alert>Oops! We have encountered an error: "+errmsg+
                " <a href='#' class='close'>&times;</a></div>"); // add the error to the dom
            console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
        }
    });
};
     $(function() {





    // This function gets cookie with a given name

    function getCookie(name) {

        var cookieValue = null;

        if (document.cookie && document.cookie != '') {

            var cookies = document.cookie.split(';');

            for (var i = 0; i < cookies.length; i++) {

                var cookie = jQuery.trim(cookies[i]);

                // Does this cookie string begin with the name we want?

                if (cookie.substring(0, name.length + 1) == (name + '=')) {

                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));

                    break;

                }

            }

        }

        return cookieValue;

    }

    var csrftoken = getCookie('csrftoken');



    /*

    The functions below will create a header with csrftoken

    */



    function csrfSafeMethod(method) {

        // these HTTP methods do not require CSRF protection

        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));

    }

    function sameOrigin(url) {

        // test that a given url is a same-origin URL

        // url could be relative or scheme relative or absolute

        var host = document.location.host; // host + port

        var protocol = document.location.protocol;

        var sr_origin = '//' + host;

        var origin = protocol + sr_origin;

        // Allow absolute or scheme relative URLs to same origin

        return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||

            (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||

            // or any other URL that isn't scheme relative or absolute i.e relative.

            !(/^(\/\/|http:|https:).*/.test(url));

    }



    $.ajaxSetup({

        beforeSend: function(xhr, settings) {

            if (!csrfSafeMethod(settings.type) && sameOrigin(settings.url)) {

                // Send the token to same-origin, relative URLs only.

                // Send the token only if the method warrants CSRF protection

                // Using the CSRFToken value acquired earlier

                xhr.setRequestHeader("X-CSRFToken", csrftoken);

            }

        }

    });



});
  </script>

</body>

</html>